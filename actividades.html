<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Actividades - Potencia y Ra√≠z Cuadrada</title> <link rel="stylesheet" href="styles.css">
</head>
<body id="page-activities">
  <div class="page">
    <header class="hero small">
      <div class="hero-content">
        <div class="logo">üéØ</div>
        <div class="hero-text">
          <h1>Actividades Pr√°cticas de Aritm√©tica</h1> <p class="lead">Ejercicios din√°micos - Cada intento es diferente</p>
        </div>
      </div>
    </header>

    <main class="container">
      <section class="card">
        <div class="card-icon">üìà</div> <h2>Ejercicio 1: C√°lculo de Potencias</h2> <p class="instruction" id="task1Instruction">Calcula el resultado de la siguiente expresi√≥n:</p>
        
        <div class="exercise-display-container">
          <div class="math-problem-large" id="powerProblem"></div>
        </div>

        <div class="input-section">
          <div class="input-group">
            <label for="inputResult1">Resultado:</label>
            <input id="inputResult1" class="coord-input" type="number" placeholder="Respuesta">
          </div>
        </div>

        <button id="checkResult1" class="btn btn-primary">
          <span class="btn-icon">‚úÖ</span>
          <span class="btn-text">Verificar Respuesta</span>
        </button>
        <button id="newPowerProblem" class="btn btn-outline">
          <span class="btn-icon">üîÑ</span>
          <span class="btn-text">Nuevo Desaf√≠o</span>
        </button>

        <div id="feedbackResult1" class="feedback-message"></div>
      </section>

      <section class="card">
        <div class="card-icon">üóùÔ∏è</div> <h2>Ejercicio 2: C√°lculo de Ra√≠ces Cuadradas</h2> <p class="instruction" id="task2Instruction">Calcula la ra√≠z cuadrada exacta del n√∫mero:</p>
        
        <div class="exercise-display-container">
          <div class="math-problem-large" id="rootProblem"></div>
        </div>

        <div class="input-section">
          <div class="input-group">
            <label for="inputResult2">Resultado:</label>
            <input id="inputResult2" class="coord-input" type="number" placeholder="Ra√≠z">
          </div>
        </div>

        <button id="checkResult2" class="btn btn-primary">
          <span class="btn-icon">‚úÖ</span>
          <span class="btn-text">Verificar Respuesta</span>
        </button>
        <button id="newRootProblem" class="btn btn-outline">
          <span class="btn-icon">üîÑ</span>
          <span class="btn-text">Nuevo Desaf√≠o</span>
        </button>

        <div id="feedbackResult2" class="feedback-message"></div>
      </section>
      
      <section class="card navigation-card">
        <h2>üìö ¬øQu√© hacer ahora?</h2>
        <div class="action-buttons">
          <a href="index.html" class="btn btn-outline">
            <span class="btn-icon">üìñ</span>
            <span class="btn-text">Repasar la Lecci√≥n</span>
          </a>
          <a href="examen.html" class="btn btn-primary">
            <span class="btn-icon">üìù</span>
            <span class="btn-text">Presentar Examen</span>
          </a>
        </div>
        
        <div style="margin-top: 24px; padding: 20px; background: linear-gradient(135deg, #DBEAFE 0%, white 100%); border-radius: 12px; border-left: 4px solid #3B82F6;">
          <p style="margin: 0; color: #1F2937; font-weight: 600;">
            <strong>üìä Consejo:</strong> ¬°La pr√°ctica hace al maestro! Si te equivocas, vuelve a la lecci√≥n.
          </p>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>üéØ Actividades - Potencia y Ra√≠z Cuadrada</p> </footer>
  </div>
  
  <script src="app.js"></script>
  <script>
    (function () {
      'use strict';
      
      // Intentar usar randInt de app.js si est√° expuesto, si no, lo definimos
      const randInt = (window.app && window.app.randInt) ? window.app.randInt : function(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      };

      // --- Ejercicio 1: Potencias ---
      let currentPowerAnswer = null;

      function generatePowerProblem() {
        const base = randInt(2, 7); // Base entre 2 y 7
        const exponent = randInt(2, 4); // Exponente 2, 3 o 4
        currentPowerAnswer = Math.pow(base, exponent);
        
        const problemEl = document.getElementById('powerProblem');
        problemEl.innerHTML = `
          <span class="base-number">${base}</span>
          <span class="exponent-number">${exponent}</span>
        `;
        document.getElementById('inputResult1').value = '';
        document.getElementById('inputResult1').disabled = false;
        document.getElementById('feedbackResult1').textContent = '¬°A calcular!';
        document.getElementById('feedbackResult1').className = 'feedback-message';
      }

      function checkPowerResult() {
        const input = document.getElementById('inputResult1');
        const userAnswer = parseInt(input.value);
        const feedbackEl = document.getElementById('feedbackResult1');
        
        if (isNaN(userAnswer)) {
          feedbackEl.textContent = '‚ö†Ô∏è Por favor, ingresa un n√∫mero.';
          feedbackEl.className = 'feedback-message feedback-warning';
          return;
        }

        if (userAnswer === currentPowerAnswer) {
          feedbackEl.textContent = `ü•≥ ¬°Correcto! ${currentPowerAnswer} es la respuesta.`;
          feedbackEl.className = 'feedback-message feedback-success';
          input.disabled = true;
          if(window.app && window.app.vibrate) window.app.vibrate([100, 50, 100]);
        } else {
          feedbackEl.textContent = '‚ùå Incorrecto. Vuelve a intentarlo o genera un nuevo desaf√≠o.';
          feedbackEl.className = 'feedback-message feedback-error';
          if(window.app && window.app.vibrate) window.app.vibrate([200]);
        }
      }

      // --- Ejercicio 2: Ra√≠ces Cuadradas ---
      let currentRootAnswer = null;

      function generateRootProblem() {
        const root = randInt(4, 12); // Ra√≠z (respuesta) entre 4 y 12
        const radicand = root * root;
        currentRootAnswer = root;
        
        const problemEl = document.getElementById('rootProblem');
        problemEl.innerHTML = `
          ‚àö<span class="radicand-number">${radicand}</span>
        `;
        document.getElementById('inputResult2').value = '';
        document.getElementById('inputResult2').disabled = false;
        document.getElementById('feedbackResult2').textContent = '¬°A calcular!';
        document.getElementById('feedbackResult2').className = 'feedback-message';
      }

      function checkRootResult() {
        const input = document.getElementById('inputResult2');
        const userAnswer = parseInt(input.value);
        const feedbackEl = document.getElementById('feedbackResult2');
        
        if (isNaN(userAnswer)) {
          feedbackEl.textContent = '‚ö†Ô∏è Por favor, ingresa un n√∫mero.';
          feedbackEl.className = 'feedback-message feedback-warning';
          return;
        }

        if (userAnswer === currentRootAnswer) {
          feedbackEl.textContent = `ü•≥ ¬°Correcto! ${currentRootAnswer} es la respuesta.`;
          feedbackEl.className = 'feedback-message feedback-success';
          input.disabled = true;
          if(window.app && window.app.vibrate) window.app.vibrate([100, 50, 100]);
        } else {
          feedbackEl.textContent = '‚ùå Incorrecto. Vuelve a intentarlo o genera un nuevo desaf√≠o.';
          feedbackEl.className = 'feedback-message feedback-error';
          if(window.app && window.app.vibrate) window.app.vibrate([200]);
        }
      }

      // --- Inicializaci√≥n y Eventos ---
      function setupActivityEvents() {
        // Potencias
        document.getElementById('checkResult1').addEventListener('click', checkPowerResult);
        document.getElementById('newPowerProblem').addEventListener('click', generatePowerProblem);
        
        // Ra√≠ces
        document.getElementById('checkResult2').addEventListener('click', checkRootResult);
        document.getElementById('newRootProblem').addEventListener('click', generateRootProblem);

        // Generar problemas iniciales
        generatePowerProblem();
        generateRootProblem();
      }

      window.addEventListener('load', setupActivityEvents);
    })();
  </script>
</body>
</html>